<app-container class="container-editar-noticia">

  <h2 class="titulo-de-sessao" >EDIÇÃO DE NOTÍCIA</h2>
  <mat-form-field class="titulo">
    <mat-label>TÍTULO DA NOTÍCIA</mat-label>
    <textarea
      class="titulo"
      placeholder="Máximo de 200 caracteres"
      maxlength="200"
      matInput
      [(ngModel)]="infosPostagem.titulo"
      name="titulo"
      required>
    </textarea>
  </mat-form-field>

  <mat-form-field class="descricao">
    <mat-label>DESCRIÇÃO DA NOTÍCIA</mat-label>
    <textarea
      class="descricao"
      placeholder="Máximo de 300 caracteres"
      maxlength="300"
      matInput
      [(ngModel)]="infosPostagem.descricao"
      name="descricao"
      required>
    </textarea>
  </mat-form-field>

  <div class="imagem-pre-visualizar" *ngIf="imagemBase64">
    <h3>Pré-visualização da Imagem:</h3>
    <img [src]="imagemBase64" alt="Pré-visualização da Imagem">
  </div>

  <div class="botoes-de-envio">
    <input
      type="file"
      id="fileInput"
      style="display: none;"
      (change)="selecionarImagem($event)"
      accept="image/*" />

    <button class="botao" mat-button (click)="abrirSeletorDeArquivo()">
      SELECIONE UMA IMAGEM
    </button>
  </div>

  <div>
    <div class="textos-principais-editados">

      <!-- Texto Manual -->
      <h3 class="titulo-de-sessao" >ANÁLISE VERITARE</h3>
      <quill-editor
      class="texto-da-noticia-editada"
      [(ngModel)]="infosPostagem.conteudo"
      [modules]="modules"
      [style.height]="'500px'"
      >
    </quill-editor>

      <h3 class="titulo-de-sessao" >MARCAÇÕES DE OPINIÃO DO TEXTO </h3>
      <div *ngFor="let alerta of infosPostagem.alertas; let i = index" class="alerta-item">
        <mat-form-field> <mat-label>Alerta {{ alerta.numeroAlerta }}</mat-label>
          <textarea
            matInput
            class="alerta" [(ngModel)]="alerta.mensagem"
            [name]="'alerta-' + i"
          ></textarea>
        </mat-form-field>
        <button mat-icon-button color="warn" (click)="removerAlerta(i)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>

      <button mat-raised-button color="accent" (click)="adicionarAlerta()" [disabled]="infosPostagem.alertas.length >= 20">
        <mat-icon>add</mat-icon> Adicionar Marcação
      </button>


      <!-- Texto Gerado Pela IASentona -->
      <h3 class="titulo-de-sessao" >MATÉRIA GERADA POR VERITARE</h3>
      <quill-editor
        class="texto-da-noticia-editada"
        [(ngModel)]="infosPostagem.textoAlteradoPorIA"
        [modules]="modules"
        [style.height]="'800px'"
        >
      </quill-editor>

      <!-- Palavras Cortadas -->
      <h3 class="titulo-de-sessao" >FONTE DA MATÉRIA ANALISADA</h3>
      <quill-editor
        class="texto-da-noticia-editada"
        [(ngModel)]="infosPostagem.palavrasRetiradasPorIA"
        [modules]="modules"
        [style.height]="'800px'"
        >
      </quill-editor>
    </div>

      <!-- Status -->
      <div>
        <mat-form-field class="status">
          <mat-label>STATUS DA NOTÍCIA</mat-label>
          <mat-select [(ngModel)]="statusSelecionado" name="status" required>
            <mat-option *ngFor="let status of ListaDeStatus" [value]="status.id">
              {{ status.descricao }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="editoria">
          <mat-label>EDITORIA</mat-label>
          <mat-select [(ngModel)]="editoriaSelecionada" name="editoria" required>
            <mat-option *ngFor="let editoria of listaDeEditorias" [value]="editoria.id">
              {{ editoria.nome }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="premiumOuComum">
          <mat-label>TIPO DE PUBLICAÇÃO</mat-label>
          <mat-select [(ngModel)]="tipoSelecionado">
              <mat-option *ngFor="let tipo of tipoDePublicacao" [value]="tipo">
                  {{ tipo }}
              </mat-option>
          </mat-select>
      </mat-form-field>

      </div>
  </div>

  <!-- Botão para Confirmar Edição -->
  <div class="botoes-de-envio">
    <button
      class="botao"
      mat-raised-button
      color="primary"
      (click)="salvarEdicao()">
      SALVAR ALTERAÇÕES
    </button>
  </div>

</app-container>
<app-footer></app-footer>
